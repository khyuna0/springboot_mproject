<html layout:decorate="~{layout}">
  <div layout:fragment="content" class="container mt-4">

    <!-- 내 정보 -->
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <h3 class="card-title text-center mb-4">내 정보</h3>

        <form th:object="${userInfo}" autocomplete="off">
          <div class="mb-3">
            <label for="username" class="form-label">아이디</label>
            <input id="username" type="text" class="form-control" th:field="*{username}" readonly>
          </div>

          <div class="mb-3">
            <label for="useremail" class="form-label">이메일</label>
            <input id="useremail" type="email" class="form-control" th:field="*{useremail}" readonly>
          </div>

          <div class="mb-3">
            <label for="realname" class="form-label">실명</label>
            <input id="realname" type="text" class="form-control" th:field="*{realname}" readonly>
          </div>
        </form>
      </div>
    </div>

    <!-- 예약 목록 -->
    <div class="card shadow-sm">
      <div class="card-body">
        <h4 class="card-title mb-3">내 예약 목록</h4>

        <div th:if="${#lists.isEmpty(userInfo.reservations)}" class="text-muted">
          예약 내역이 없습니다.
        </div>

        <div th:each="r, stat : ${userInfo.reservations}" 
     		class="card mb-3 shadow-sm border">
         <div class="card-body p-3">

            <!-- 예약 번호 -->
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0 text-muted">
                예약 #<span th:text="${stat.index + 1}"></span>
              </h6>
              <div>
                <a th:href="@{/modify_reservation/{id}(id=${r.id})}" 
                   class="btn btn-sm btn-outline-primary">수정</a>
                <a th:href="@{/delete_reservation/{id}(id=${r.id})}" 
                   class="btn btn-sm btn-outline-danger">삭제</a>
              </div>
            </div>

            <!-- 예약 상세 -->
            <p class="card-text mb-1">
              <strong>상담 주제:</strong> <span th:text="${r.subject}">상담 주제</span>
            </p>
            <p class="card-text mb-1 small">
              <strong>상담 일시:</strong> 
              <span th:text="${#temporals.format(r.reserveDate, 'yyyy-MM-dd HH:mm')}">2025-09-16 14:00</span>
            </p>

            <!-- 예약 메세지 -->
            <div class="text-end">
              <small class="text-muted">
                예약 메세지: <span th:text="${r.message}">예약 관련 메세지</span>
              </small>
            </div>
          </div>
        </div>

      </div>
    </div>
    
  </div>
</html>
