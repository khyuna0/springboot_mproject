<html layout:decorate="~{layout}">
<body>
<div layout:fragment="content" class="card">
  <div class="card-body">
    <h3 class="card-title text-center mb-4">내 정보</h3>

    <!-- 사용자 기본 정보 -->
    <form th:object="${userInfo}" autocomplete="off">
      <div class="mb-3">
        <label for="username" class="form-label">아이디</label>
        <input id="username" type="text" class="form-control" th:field="*{username}" readonly>
      </div>

      <div class="mb-3">
        <label for="useremail" class="form-label">이메일</label>
        <input id="useremail" type="email" class="form-control" th:field="*{useremail}" readonly>
      </div>

      <div class="mb-3">
        <label for="realname" class="form-label">실명</label>
        <input id="realname" type="text" class="form-control" th:field="*{realname}" readonly>
      </div>

      <div class="d-grid">
        <a th:href="@{/modifyUser}" class="btn btn-primary">내 정보 수정</a>
      </div>
    </form>
  </div>
  
  <hr>

  <!-- 예약 정보 -->
  <div class="card mt-4">
    <div class="card-body">
      <h4 class="card-title">내 예약 목록</h4>

      <div th:if="${#lists.isEmpty(userInfo.reservation)}" class="text-muted">
        예약 내역이 없습니다.
      </div>

      <div th:each="r, stat : ${userInfo.reservation}" class="card mb-2 p-2 shadow-sm">
        <div class="card-body p-2">
          
          <!-- 예약 번호 + 수정/삭제 버튼 -->
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h6 class="mb-0 text-muted">
              예약 #<span th:text="${stat.index + 1}"></span>
            </h6>
            <div>
              <a th:href="@{/modify_reservation/{id}(id=${r.id})}"
                 class="btn btn-sm btn-outline-primary">수정</a>
              <a th:href="@{/delete_reservation/{id}(id=${r.id})}"
                 class="btn btn-sm btn-outline-danger">삭제</a>
            </div>
          </div>

          <!-- 예약 상세 내용 -->
          <p class="card-text mb-1">
            <strong>상담 주제:</strong> <span th:text="${r.topic}">상담 주제</span>
          </p>
          <p class="card-text mb-1 small">
            <strong>상담 날짜:</strong> <span th:text="${#temporals.format(r.date, 'yyyy-MM-dd')}">2025-09-16</span>
            <strong>시간:</strong> <span th:text="${r.time}">14:00</span>
          </p>

          <!-- 등록일 -->
          <div class="d-flex justify-content-end">
            <small class="text-muted">
              예약 등록일: <span th:text="${#temporals.format(r.createDate, 'yyyy-MM-dd HH:mm')}">2025-09-16 15:00</span>
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
  
</div>
</body>
</html>
